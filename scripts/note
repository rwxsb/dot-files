#!/bin/bash

zetdir='Repositories/me/zet/'
myzetdir="$HOME/$zetdir"
isosec=$(date -u +%Y%m%d%H%M%S)

createNote(){
	currentdir=$(pwd)
	cd $myzetdir
	git pull origin master;
	mkdir $isosec
	cd $isosec
	if [ -f ${@:-""} ];
		#echo $@
		then echo "## $@" >> README.md; 
	else
		touch README.md
	fi
	vi README.md
	wait
	git add *;
	git commit -m "($isosec) $(grep "## " README.md)";
	git push origin master;
	cd $currentdir
}

findNote(){
	currentdir=$(pwd)
	cd $myzetdir
	grep -R $OPTARG . | awk '{++cnt} {print cnt") " substr($1,3,14)}'
	cd $currentdir
}


while getopts "f:c" OPTION
do
        case $OPTION in
		f)
		findNote $OPTARG
		exit 0
		;;
                c)
                createNote $OPTARG
                exit 0
                ;;
		?)
		echo "Please specify some arguments, I don't 				know what any of the $@ means"
		exit -1
		;;
        esac
done
